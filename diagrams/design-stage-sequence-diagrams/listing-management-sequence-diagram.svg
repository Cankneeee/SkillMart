<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2372px" preserveAspectRatio="none" style="width:1308px;height:2372px;background:#FFFFFF;" version="1.1" viewBox="0 0 1308 2372" width="1308px" zoomAndPan="magnify"><title>Listing Management Sequence Diagram (Design Phase)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="439.1406" x="435.7244" y="27.9951">Listing Management Sequence Diagram (Design Phase)</text><rect fill="none" height="558.3281" style="stroke:#000000;stroke-width:1.5;" width="1261.5894" x="20" y="281.2578"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="969.6597" x="236.8311" y="363.6563"/><rect fill="none" height="633.3984" style="stroke:#000000;stroke-width:1.5;" width="1291.5894" x="10" y="1144.9141"/><rect fill="none" height="412.6641" style="stroke:#000000;stroke-width:1.5;" width="1271.5894" x="20" y="1314.7109"/><rect fill="none" height="162.7969" style="stroke:#000000;stroke-width:1.5;" width="1044.7583" x="236.8311" y="1426.2422"/><rect fill="none" height="235.8672" style="stroke:#000000;stroke-width:1.5;" width="1186.4907" x="20" y="2038.375"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="44.9551" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="118.5938" y2="2291.2422"/></g><g><title>User Interface</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="299.3506" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="302.8311" x2="302.8311" y1="118.5938" y2="2291.2422"/></g><g><title>Validation Utility</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="505.4976" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="508.5732" x2="508.5732" y1="118.5938" y2="2291.2422"/></g><g><title>Database Utility</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="643.6372" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.4219" x2="647.4219" y1="118.5938" y2="2291.2422"/></g><g><title>Auth Utility</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="763.0737" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="766.8525" x2="766.8525" y1="118.5938" y2="2291.2422"/></g><g><title>Storage Utility</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="876.498" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="880.2949" x2="880.2949" y1="118.5938" y2="2291.2422"/></g><g><title>AI Utility</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="980.3691" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="983.7012" x2="983.7012" y1="118.5938" y2="2291.2422"/></g><g><title>Supabase</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="1151.1914" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1154.8921" x2="1154.8921" y1="118.5938" y2="2291.2422"/></g><g><title>OpenAI</title><rect fill="#000000" fill-opacity="0.00000" height="2172.6484" width="8" x="1235.04" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1238.4907" x2="1238.4907" y1="118.5938" y2="2291.2422"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="30" y="115.292">User</text><ellipse cx="48.9551" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.9551,58.7969 L48.9551,85.7969 M35.9551,66.7969 L61.9551,66.7969 M48.9551,85.7969 L35.9551,100.7969 M48.9551,85.7969 L61.9551,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="30" y="2303.2373">User</text><ellipse cx="48.9551" cy="2315.0391" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.9551,2323.0391 L48.9551,2350.0391 M35.9551,2331.0391 L61.9551,2331.0391 M48.9551,2350.0391 L35.9551,2365.0391 M48.9551,2350.0391 L61.9551,2365.0391" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="UI"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.0391" x="246.8311" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.0391" x="253.8311" y="107.292">User Interface</text></g><g class="participant participant-tail" data-participant="UI"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113.0391" x="246.8311" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.0391" x="253.8311" y="2310.2373">User Interface</text></g><g class="participant participant-head" data-participant="ValidationUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.8486" x="444.5732" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.8486" x="451.5732" y="107.292">Validation Utility</text></g><g class="participant participant-tail" data-participant="ValidationUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129.8486" x="444.5732" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.8486" x="451.5732" y="2310.2373">Validation Utility</text></g><g class="participant participant-head" data-participant="DBUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.4307" x="584.4219" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.4307" x="591.4219" y="107.292">Database Utility</text></g><g class="participant participant-tail" data-participant="DBUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.4307" x="584.4219" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.4307" x="591.4219" y="2310.2373">Database Utility</text></g><g class="participant participant-head" data-participant="AuthUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.4424" x="720.8525" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.4424" x="727.8525" y="107.292">Auth Utility</text></g><g class="participant participant-tail" data-participant="AuthUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92.4424" x="720.8525" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.4424" x="727.8525" y="2310.2373">Auth Utility</text></g><g class="participant participant-head" data-participant="StorageUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114.4063" x="823.2949" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.4063" x="830.2949" y="107.292">Storage Utility</text></g><g class="participant participant-tail" data-participant="StorageUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="114.4063" x="823.2949" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.4063" x="830.2949" y="2310.2373">Storage Utility</text></g><g class="participant participant-head" data-participant="AIUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.3359" x="947.7012" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.3359" x="954.7012" y="107.292">AI Utility</text></g><g class="participant participant-tail" data-participant="AIUtil"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="73.3359" x="947.7012" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.3359" x="954.7012" y="2310.2373">AI Utility</text></g><g class="participant participant-head" data-participant="Supabase"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.5986" x="1113.8921" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.5986" x="1120.8921" y="107.292">Supabase</text></g><g class="participant participant-tail" data-participant="Supabase"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="82.5986" x="1113.8921" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.5986" x="1120.8921" y="2310.2373">Supabase</text></g><g class="participant participant-head" data-participant="OpenAI"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.0986" x="1206.4907" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.0986" x="1213.4907" y="107.292">OpenAI</text></g><g class="participant participant-tail" data-participant="OpenAI"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="65.0986" x="1206.4907" y="2290.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51.0986" x="1213.4907" y="2310.2373">OpenAI</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,145.7266,301.3506,149.7266,291.3506,153.7266,295.3506,149.7266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="55.9551" y="144.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.313" x="69.0005" y="144.6606">Fill listing form</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,174.8594,301.3506,178.8594,291.3506,182.8594,295.3506,178.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="178.8594" y2="178.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="55.9551" y="173.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.1362" x="69.0005" y="173.7935">Upload image (optional)</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,203.9922,301.3506,207.9922,291.3506,211.9922,295.3506,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="55.9551" y="202.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.7866" x="69.0005" y="202.9263">Submit form</text></g><g class="message" data-participant-1="UI" data-participant-2="ValidationUtil"><polygon fill="#181818" points="497.4976,233.125,507.4976,237.125,497.4976,241.125,501.4976,237.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="503.4976" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="310.3506" y="232.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.3452" x="323.396" y="232.0591">Validate all form fields</text></g><g class="message" data-participant-1="ValidationUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,262.2578,304.3506,266.2578,314.3506,270.2578,310.3506,266.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="508.4976" y1="266.2578" y2="266.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="320.3506" y="261.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.0562" x="333.396" y="261.1919">Return validation results</text></g><path d="M20,281.2578 L84.4429,281.2578 L84.4429,288.3906 L74.4429,298.3906 L20,298.3906 L20,281.2578" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="558.3281" style="stroke:#000000;stroke-width:1.5;" width="1261.5894" x="20" y="281.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="294.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118.1318" x="99.4429" y="293.4683">[validation passes]</text><g class="message" data-participant-1="UI" data-participant-2="AuthUtil"><polygon fill="#181818" points="755.0737,315.5234,765.0737,319.5234,755.0737,323.5234,759.0737,319.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="761.0737" y1="319.5234" y2="319.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="310.3506" y="314.4575">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.4619" x="323.396" y="314.4575">getCurrentUser()</text></g><g class="message" data-participant-1="AuthUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,344.6563,304.3506,348.6563,314.3506,352.6563,310.3506,348.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="766.0737" y1="348.6563" y2="348.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="320.3506" y="343.5903">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.8525" x="333.396" y="343.5903">Return user data</text></g><path d="M236.8311,363.6563 L301.2739,363.6563 L301.2739,370.7891 L291.2739,380.7891 L236.8311,380.7891 L236.8311,363.6563" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="969.6597" x="236.8311" y="363.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="251.8311" y="376.7231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109.5381" x="316.2739" y="375.8667">[image uploaded]</text><g class="message" data-participant-1="UI" data-participant-2="StorageUtil"><polygon fill="#181818" points="868.498,397.9219,878.498,401.9219,868.498,405.9219,872.498,401.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="874.498" y1="401.9219" y2="401.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="310.3506" y="396.856">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.9307" x="323.396" y="396.856">uploadImage(file)</text></g><g class="message" data-participant-1="StorageUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,427.0547,1153.1914,431.0547,1143.1914,435.0547,1147.1914,431.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="880.498" x2="1149.1914" y1="431.0547" y2="431.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="887.498" y="425.9888">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116.251" x="900.5435" y="425.9888">Upload to storage</text></g><g class="message" data-participant-1="Supabase" data-participant-2="StorageUtil"><polygon fill="#181818" points="891.498,456.1875,881.498,460.1875,891.498,464.1875,887.498,460.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="885.498" x2="1154.1914" y1="460.1875" y2="460.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="897.498" y="455.1216">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.498" x="919.5889" y="455.1216">Return image URL</text></g><g class="message" data-participant-1="StorageUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,485.3203,304.3506,489.3203,314.3506,493.3203,310.3506,489.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="879.498" y1="489.3203" y2="489.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="484.2544">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.498" x="342.4414" y="484.2544">Return image URL</text></g><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,521.4531,645.6372,525.4531,635.6372,529.4531,639.6372,525.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="525.4531" y2="525.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="520.3872">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.8047" x="332.4414" y="520.3872">createListing(data)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,550.5859,1153.1914,554.5859,1143.1914,558.5859,1147.1914,554.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="554.5859" y2="554.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="549.52">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.48" x="676.728" y="549.52">Insert into listings table</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,579.7188,648.6372,583.7188,658.6372,587.7188,654.6372,583.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="583.7188" y2="583.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="578.6528">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6943" x="686.728" y="578.6528">Return listing data</text></g><g class="message" data-participant-1="UI" data-participant-2="AIUtil"><polygon fill="#181818" points="972.3691,608.8516,982.3691,612.8516,972.3691,616.8516,976.3691,612.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="978.3691" y1="612.8516" y2="612.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="607.7856">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.6978" x="332.4414" y="607.7856">generateEmbedding(listingText)</text></g><g class="message" data-participant-1="AIUtil" data-participant-2="OpenAI"><polygon fill="#181818" points="1227.04,637.9844,1237.04,641.9844,1227.04,645.9844,1231.04,641.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="984.3691" x2="1233.04" y1="641.9844" y2="641.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="991.3691" y="636.9185">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.1323" x="1013.46" y="636.9185">Create embedding</text></g><g class="message" data-participant-1="OpenAI" data-participant-2="AIUtil"><polygon fill="#181818" points="995.3691,667.1172,985.3691,671.1172,995.3691,675.1172,991.3691,671.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="989.3691" x2="1238.04" y1="671.1172" y2="671.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1001.3691" y="666.0513">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9688" x="1023.46" y="666.0513">Return embedding vector</text></g><g class="message" data-participant-1="AIUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,696.25,1153.1914,700.25,1143.1914,704.25,1147.1914,700.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="984.3691" x2="1149.1914" y1="700.25" y2="700.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="991.3691" y="695.1841">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112.2964" x="1013.46" y="695.1841">Store embedding</text></g><g class="message" data-participant-1="Supabase" data-participant-2="AIUtil"><polygon fill="#181818" points="995.3691,725.3828,985.3691,729.3828,995.3691,733.3828,991.3691,729.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="989.3691" x2="1154.1914" y1="729.3828" y2="729.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1001.3691" y="724.3169">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.9839" x="1023.46" y="724.3169">Confirm storage</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,754.5156,304.3506,758.5156,314.3506,762.5156,310.3506,758.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="758.5156" y2="758.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="753.4497">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.9531" x="342.4414" y="753.4497">Return success with listing ID</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,783.6484,49.9551,787.6484,59.9551,791.6484,55.9551,787.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="787.6484" y2="787.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="782.5825">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.5767" x="88.0459" y="782.5825">Show success and redirect</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="1281.5894" y1="796.6484" y2="796.6484"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.0293" x="25" y="806.8589">[validation fails]</text><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,827.5859,49.9551,831.5859,59.9551,835.5859,55.9551,831.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="831.5859" y2="831.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="826.52">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.9453" x="88.0459" y="826.52">Display validation errors</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,863.7188,301.3506,867.7188,291.3506,871.7188,295.3506,867.7188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="867.7188" y2="867.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="55.9551" y="862.6528">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.8218" x="78.0459" y="862.6528">Navigate to listing</text></g><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,892.8516,645.6372,896.8516,635.6372,900.8516,639.6372,896.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="896.8516" y2="896.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="891.7856">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8799" x="332.4414" y="891.7856">getListingById(id)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,921.9844,1153.1914,925.9844,1143.1914,929.9844,1147.1914,925.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="925.9844" y2="925.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="920.9185">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.8369" x="676.728" y="920.9185">Query listing</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,951.1172,648.6372,955.1172,658.6372,959.1172,654.6372,955.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="955.1172" y2="955.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="950.0513">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.6943" x="686.728" y="950.0513">Return listing data</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,980.25,304.3506,984.25,314.3506,988.25,310.3506,984.25" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="984.25" y2="984.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="979.1841">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87.2803" x="342.4414" y="979.1841">Return listing</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,1009.3828,49.9551,1013.3828,59.9551,1017.3828,55.9551,1013.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="1013.3828" y2="1013.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="1008.3169">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.3047" x="88.0459" y="1008.3169">Display listing with edit controls</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,1038.5156,301.3506,1042.5156,291.3506,1046.5156,295.3506,1042.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="1042.5156" y2="1042.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="55.9551" y="1037.4497">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.4595" x="78.0459" y="1037.4497">Edit listing fields</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,1067.6484,301.3506,1071.6484,291.3506,1075.6484,295.3506,1071.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="1071.6484" y2="1071.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="55.9551" y="1066.5825">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.8633" x="78.0459" y="1066.5825">Submit changes</text></g><g class="message" data-participant-1="UI" data-participant-2="ValidationUtil"><polygon fill="#181818" points="497.4976,1096.7813,507.4976,1100.7813,497.4976,1104.7813,501.4976,1100.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="503.4976" y1="1100.7813" y2="1100.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1095.7153">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.5786" x="332.4414" y="1095.7153">Validate changed fields</text></g><g class="message" data-participant-1="ValidationUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,1125.9141,304.3506,1129.9141,314.3506,1133.9141,310.3506,1129.9141" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="508.4976" y1="1129.9141" y2="1129.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="1124.8481">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.0562" x="342.4414" y="1124.8481">Return validation results</text></g><path d="M10,1144.9141 L74.4429,1144.9141 L74.4429,1152.0469 L64.4429,1162.0469 L10,1162.0469 L10,1144.9141" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="633.3984" style="stroke:#000000;stroke-width:1.5;" width="1291.5894" x="10" y="1144.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="1157.981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118.1318" x="89.4429" y="1157.1245">[validation passes]</text><g class="message" data-participant-1="UI" data-participant-2="AuthUtil"><polygon fill="#181818" points="755.0737,1179.1797,765.0737,1183.1797,755.0737,1187.1797,759.0737,1183.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="761.0737" y1="1183.1797" y2="1183.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1178.1138">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.4619" x="332.4414" y="1178.1138">getCurrentUser()</text></g><g class="message" data-participant-1="AuthUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,1208.3125,304.3506,1212.3125,314.3506,1216.3125,310.3506,1212.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="766.0737" y1="1212.3125" y2="1212.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="1207.2466">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.8525" x="342.4414" y="1207.2466">Return user data</text></g><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,1237.4453,645.6372,1241.4453,635.6372,1245.4453,639.6372,1241.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="1241.4453" y2="1241.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1236.3794">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260.3428" x="332.4414" y="1236.3794">checkListingOwnership(userId, listingId)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,1266.5781,1153.1914,1270.5781,1143.1914,1274.5781,1147.1914,1270.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="1270.5781" y2="1270.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="1265.5122">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.2939" x="676.728" y="1265.5122">Verify ownership</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,1295.7109,648.6372,1299.7109,658.6372,1303.7109,654.6372,1299.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="1299.7109" y2="1299.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="1294.645">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2056" x="686.728" y="1294.645">Return ownership status</text></g><path d="M20,1314.7109 L84.4429,1314.7109 L84.4429,1321.8438 L74.4429,1331.8438 L20,1331.8438 L20,1314.7109" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="412.6641" style="stroke:#000000;stroke-width:1.5;" width="1271.5894" x="20" y="1314.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="1327.7778">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.731" x="99.4429" y="1326.9214">[user is owner]</text><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,1348.9766,645.6372,1352.9766,635.6372,1356.9766,639.6372,1352.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="1352.9766" y2="1352.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1347.9106">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187.605" x="332.4414" y="1347.9106">updateListing(listingId, data)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,1378.1094,1153.1914,1382.1094,1143.1914,1386.1094,1147.1914,1382.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="1382.1094" y2="1382.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="1377.0435">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.8237" x="676.728" y="1377.0435">Update listing data</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,1407.2422,648.6372,1411.2422,658.6372,1415.2422,654.6372,1411.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="1411.2422" y2="1411.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="1406.1763">40</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.4038" x="686.728" y="1406.1763">Confirm update</text></g><path d="M236.8311,1426.2422 L301.2739,1426.2422 L301.2739,1433.375 L291.2739,1443.375 L236.8311,1443.375 L236.8311,1426.2422" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="162.7969" style="stroke:#000000;stroke-width:1.5;" width="1044.7583" x="236.8311" y="1426.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="251.8311" y="1439.3091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114.415" x="316.2739" y="1438.4526">[content changed]</text><g class="message" data-participant-1="UI" data-participant-2="AIUtil"><polygon fill="#181818" points="972.3691,1460.5078,982.3691,1464.5078,972.3691,1468.5078,976.3691,1464.5078" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="978.3691" y1="1464.5078" y2="1464.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1459.4419">41</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.8291" x="332.4414" y="1459.4419">updateEmbedding(listingId, newText)</text></g><g class="message" data-participant-1="AIUtil" data-participant-2="OpenAI"><polygon fill="#181818" points="1227.04,1489.6406,1237.04,1493.6406,1227.04,1497.6406,1231.04,1493.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="984.3691" x2="1233.04" y1="1493.6406" y2="1493.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="991.3691" y="1488.5747">42</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.1343" x="1013.46" y="1488.5747">Create new embedding</text></g><g class="message" data-participant-1="OpenAI" data-participant-2="AIUtil"><polygon fill="#181818" points="995.3691,1518.7734,985.3691,1522.7734,995.3691,1526.7734,991.3691,1522.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="989.3691" x2="1238.04" y1="1522.7734" y2="1522.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1001.3691" y="1517.7075">43</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.9688" x="1023.46" y="1517.7075">Return embedding vector</text></g><g class="message" data-participant-1="AIUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,1547.9063,1153.1914,1551.9063,1143.1914,1555.9063,1147.1914,1551.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="984.3691" x2="1149.1914" y1="1551.9063" y2="1551.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="991.3691" y="1546.8403">44</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.7314" x="1013.46" y="1546.8403">Update embedding</text></g><g class="message" data-participant-1="Supabase" data-participant-2="AIUtil"><polygon fill="#181818" points="995.3691,1577.0391,985.3691,1581.0391,995.3691,1585.0391,991.3691,1581.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="989.3691" x2="1154.1914" y1="1581.0391" y2="1581.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="1001.3691" y="1575.9731">45</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.4038" x="1023.46" y="1575.9731">Confirm update</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,1613.1719,304.3506,1617.1719,314.3506,1621.1719,310.3506,1617.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="1617.1719" y2="1617.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="1612.106">46</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="342.4414" y="1612.106">Return success</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,1642.3047,49.9551,1646.3047,59.9551,1650.3047,55.9551,1646.3047" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="1646.3047" y2="1646.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="1641.2388">47</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.6167" x="88.0459" y="1641.2388">Show success message</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="1291.5894" y1="1655.3047" y2="1655.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.9663" x="25" y="1665.5151">[not owner]</text><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,1686.2422,304.3506,1690.2422,314.3506,1694.2422,310.3506,1690.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="1690.2422" y2="1690.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="1685.1763">48</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.2061" x="342.4414" y="1685.1763">Return unauthorized error</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,1715.375,49.9551,1719.375,59.9551,1723.375,55.9551,1719.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="1719.375" y2="1719.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="1714.3091">49</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.7515" x="88.0459" y="1714.3091">Show error message</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1301.5894" y1="1735.375" y2="1735.375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102.0293" x="15" y="1745.5854">[validation fails]</text><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,1766.3125,49.9551,1770.3125,59.9551,1774.3125,55.9551,1770.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="1770.3125" y2="1770.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="1765.2466">50</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.9453" x="88.0459" y="1765.2466">Display validation errors</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,1802.4453,301.3506,1806.4453,291.3506,1810.4453,295.3506,1806.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="1806.4453" y2="1806.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="55.9551" y="1801.3794">51</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.0747" x="78.0459" y="1801.3794">Click delete button</text></g><g class="message" data-participant-1="UI" data-participant-2="UI"><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="345.3506" y1="1835.5781" y2="1835.5781"/><line style="stroke:#181818;stroke-width:1;" x1="345.3506" x2="345.3506" y1="1835.5781" y2="1848.5781"/><line style="stroke:#181818;stroke-width:1;" x1="304.3506" x2="345.3506" y1="1848.5781" y2="1848.5781"/><polygon fill="#181818" points="314.3506,1844.5781,304.3506,1848.5781,314.3506,1852.5781,310.3506,1848.5781" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1830.5122">52</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.3945" x="332.4414" y="1830.5122">Show confirmation dialog</text></g><g class="message" data-participant-1="User" data-participant-2="UI"><polygon fill="#181818" points="291.3506,1873.7109,301.3506,1877.7109,291.3506,1881.7109,295.3506,1877.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.9551" x2="297.3506" y1="1877.7109" y2="1877.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="55.9551" y="1872.645">53</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3608" x="78.0459" y="1872.645">Confirm deletion</text></g><g class="message" data-participant-1="UI" data-participant-2="AuthUtil"><polygon fill="#181818" points="755.0737,1902.8438,765.0737,1906.8438,755.0737,1910.8438,759.0737,1906.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="761.0737" y1="1906.8438" y2="1906.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1901.7778">54</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.4619" x="332.4414" y="1901.7778">getCurrentUser()</text></g><g class="message" data-participant-1="AuthUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,1931.9766,304.3506,1935.9766,314.3506,1939.9766,310.3506,1935.9766" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="766.0737" y1="1935.9766" y2="1935.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="1930.9106">55</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.8525" x="342.4414" y="1930.9106">Return user data</text></g><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,1961.1094,645.6372,1965.1094,635.6372,1969.1094,639.6372,1965.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="1965.1094" y2="1965.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="1960.0435">56</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260.3428" x="332.4414" y="1960.0435">checkListingOwnership(userId, listingId)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,1990.2422,1153.1914,1994.2422,1143.1914,1998.2422,1147.1914,1994.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="1994.2422" y2="1994.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="1989.1763">57</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.2939" x="676.728" y="1989.1763">Verify ownership</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,2019.375,648.6372,2023.375,658.6372,2027.375,654.6372,2023.375" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="2023.375" y2="2023.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="2018.3091">58</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.2056" x="686.728" y="2018.3091">Return ownership status</text></g><path d="M20,2038.375 L84.4429,2038.375 L84.4429,2045.5078 L74.4429,2055.5078 L20,2055.5078 L20,2038.375" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="235.8672" style="stroke:#000000;stroke-width:1.5;" width="1186.4907" x="20" y="2038.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="35" y="2051.4419">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.731" x="99.4429" y="2050.5854">[user is owner]</text><g class="message" data-participant-1="UI" data-participant-2="DBUtil"><polygon fill="#181818" points="635.6372,2072.6406,645.6372,2076.6406,635.6372,2080.6406,639.6372,2076.6406" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.3506" x2="641.6372" y1="2076.6406" y2="2076.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="310.3506" y="2071.5747">59</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.209" x="332.4414" y="2071.5747">deleteListing(listingId)</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="Supabase"><polygon fill="#181818" points="1143.1914,2101.7734,1153.1914,2105.7734,1143.1914,2109.7734,1147.1914,2105.7734" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="647.6372" x2="1149.1914" y1="2105.7734" y2="2105.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="654.6372" y="2100.7075">60</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198.4468" x="676.728" y="2100.7075">Delete listing and related data</text></g><g class="message" data-participant-1="Supabase" data-participant-2="DBUtil"><polygon fill="#181818" points="658.6372,2130.9063,648.6372,2134.9063,658.6372,2138.9063,654.6372,2134.9063" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="652.6372" x2="1154.1914" y1="2134.9063" y2="2134.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="664.6372" y="2129.8403">61</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.3608" x="686.728" y="2129.8403">Confirm deletion</text></g><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,2160.0391,304.3506,2164.0391,314.3506,2168.0391,310.3506,2164.0391" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="2164.0391" y2="2164.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="2158.9731">62</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.9346" x="342.4414" y="2158.9731">Return success</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,2189.1719,49.9551,2193.1719,59.9551,2197.1719,55.9551,2193.1719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="2193.1719" y2="2193.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="2188.106">63</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173.5767" x="88.0459" y="2188.106">Show success and redirect</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="20" x2="1206.4907" y1="2202.1719" y2="2202.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.9663" x="25" y="2212.3823">[not owner]</text><g class="message" data-participant-1="DBUtil" data-participant-2="UI"><polygon fill="#181818" points="314.3506,2233.1094,304.3506,2237.1094,314.3506,2241.1094,310.3506,2237.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.3506" x2="646.6372" y1="2237.1094" y2="2237.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="320.3506" y="2232.0435">64</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.2061" x="342.4414" y="2232.0435">Return unauthorized error</text></g><g class="message" data-participant-1="UI" data-participant-2="User"><polygon fill="#181818" points="59.9551,2262.2422,49.9551,2266.2422,59.9551,2270.2422,55.9551,2266.2422" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="53.9551" x2="302.3506" y1="2266.2422" y2="2266.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="65.9551" y="2261.1763">65</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.7515" x="88.0459" y="2261.1763">Show error message</text></g><!--SRC=[rLRBZjCm5DtdAomsqqhm0rqW3LD0aO01XhBtnBUjXMi7FwQKh-VwbSHfqfb1REYYQfBZ-pZttDDORWMG3znOBdVa8vLq1mUGbjp1JmUo0RBcTAVfWIpMOFXEaizxQc1PKMULT8Txq5L56wiqsHZytL9jUSDRYY4sDQ66lF3tIIqjw2rju4K1-Ku5PzHo9JUMYm3lRn5_ZzjJUMJzfeEkgQNtMCqqyDhPVGVr5zEmEwmTc-wGwNecPjr7h6VYkJOKLToyRK5UrrLrHMuqKDip_aweOnKOUlKQ2LkHTrm88jBJhTA7ukcc5OeomW- -meLgFKrKB0lCdRi_S1lFLZW3l5tIlChNG2Wcyq2ovI2OgKRpU9L2VWNhj2GF_MWq62UimTaBExpVKcF0L0G_CNMUmehimDuuhL5Sljh5Ce2w8OrIETyGngG15RvyfjYu2om02xVxL8D9hXAczlZ5bWjOTk3XmFsfDA-ENAk8YP3-ICA4AeiqgTnOr-RhX-aiPMyb62JhUuoDH8clI1EqagIoy6p4Bj8A5CNN4Xb3WYIMd-HZ2Aw7Y5qK7UJugPwijfBkA_8U96Yl4i0rPom9aXYWkjaFHrpd0KVysmnVfCZVu9TDuwvpvN4ZLdaVkXG15X-6MdFmL6jVoWDurnb5xVdm_8_35YJam3TARZbkm73c1Slby8nh6Z2673aQIcQkNW_eyEh6_7jrxC1KCjmOnZNMN8702WOhiwLScBFpQsvQGKz386YjjAcyOD18tZ9SybaR-KGV-CuJsykXAiM5wvXElpdLRC7PifhIrHS7-jI5UBACfiahAoaRpSS3iU2RQvIqMY4tHMUXxyuWesrDs5-pft87vb47Z3ZsFnZWo1psqFn84xmzukQPFMyN_bZDNcQ2QZRl6Dz1y-s9g7psKP_eaBWhr3fJMdCec9k86Zbp3kHQDZ2qhiQNfFUskMetuUYvLyqMdVSwvkomtO-h7BAt5BuDclElFqaM7TftEFVit0bZpZCVz9rAEFPsc3-pjeZeaOVbppCjyZpJ6RNJUIvwveZR_5TMy7pHHaSwcR3E0tvbMmxEAPKTQMmwWvFuYhfNcl_6xGxMEPyiF2vJOIl_oAZN8E3I6z-DuCqFmYBgtbbyhyu6MQVwciXtZCuu5MfNXaZp244GartlWlSyxZlLN_hDaxpcMJvJJVjBMLyayCnRvlqlpIKxIloF5gXdrhlBHMVfs7wQp9_nTb1g_5dwVaJRgCa_]--></g></svg>